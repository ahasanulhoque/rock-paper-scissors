<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>The Odin Project - Rock Paper Scissors</title>
</head>
<body>
    <h1>Rock Paper Scissors</h1>
    <p>This is a simple game of Rock, Paper, Scissors, played in the console against the computer.</p>
    <script>
        /*The function below uses a random number generator to
        randomly choose rock, paper, or scissors for the computer*/
        function computerPlay() {
            let hand = Math.floor(Math.random() * 3);
            if (hand === 0) {
                return 'Rock';
            } else if (hand === 1) {
                return 'Paper';
            } else {
                return 'Scissors';
            }
        }

        /*The function below simulates a round of rock paper scissors. Its inputs
        are the choices of rock, paper, or scissors made by the player and computer*/
        function playRound(playerSelection, computerSelection) {
            let playerHand = playerSelection = playerSelection.toLowerCase();
            let computerHand = computerSelection.toLowerCase();
            
            if (playerHand == 'rock' && computerHand == 'paper'){
                return 'You lose! Paper beats rock.';
            } else if (playerHand == 'rock' && computerHand == 'scissors'){
                return 'You win! Rock beats scissors.';
            } else if (playerHand == 'rock' && computerHand == 'rock'){
                return 'Draw! You both chose rock.';
            } else if (playerHand == 'paper' && computerHand == 'rock'){
                return 'You win! Paper beats rock.';
            } else if (playerHand == 'paper' && computerHand == 'scissors'){
                return 'You lose! Scissors beats paper';
            } else if (playerHand == 'paper' && computerHand == 'paper'){
                return 'Draw! You both chose paper.';
            } else if (playerHand == 'scissors' && computerHand == 'rock'){
                return 'You lose! Rock beats scissors';
            } else if (playerHand == 'scissors' && computerHand == 'paper'){
                return 'You win! Scissors beats paper';
            } else {
                return 'Draw! You both chose scissors.';
            }
        }

        //The function below plays out a 5 round game of rock, paper, scissors
        function game(){
            let playerSelection = '';           //The variables to the left are
            let result = '';                    //initialized for use in the game
            let playerScore = 0;
            let computerScore = 0;
            let promptTest = false;             //prompTest is a boolean to test whether
                                                //the user entered rock, paper, or scissors

            for (i=0; i<5; i++){
                //Do while below makes sure the user enters a valid choice when prompted
                do {
                    promptTest = false;
                    playerSelection = prompt('Choose rock, paper, or scissors');
                    if(playerSelection.toLowerCase() != 'rock' && playerSelection.toLowerCase() != 'paper' && playerSelection.toLowerCase() != 'scissors'){
                        alert('Please enter rock, paper, or scissors');
                        promptTest = true;
                    }
                } while(promptTest)

                result = playRound(playerSelection,computerPlay());
                console.log(result);            //Display who won the round
                //Increment the score for the player who won the round, or do nothing if a draw.
                if (result.charAt(4) == 'w') {
                    playerScore++;
                } else if (result.charAt(4) == 'l') {
                    computerScore++;
                }
            }
            
            //Return the final result
            if(playerScore>computerScore) {
                return 'You won the best of 5!';
            } else if(playerScore<computerScore){
                return 'You lost the best of 5!';
            } else {
                return 'The best of 5 ended in a draw!'
            }
        }
    </script>
</body>
</html>